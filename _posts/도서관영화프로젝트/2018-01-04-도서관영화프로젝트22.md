---
layout: "post"
title: "도서관영화프로젝트22"    
categories:  
- 도서관영화프로젝트      
tags:  
- 일지      
- celery   
- like  
comments : true    
date: "2019-01-04 18:50"  
---              
## 중간점검  어디까지 왔는지?    
[맨처음 글](https://maro99.github.io/%EB%8F%84%EC%84%9C%EA%B4%80%EC%98%81%ED%99%94%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/2018/09/01/%EB%8F%84%EC%84%9C%EA%B4%80%EC%98%81%ED%99%94%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B801.html) 에서 계획세운 부분이다.   

1. 크롤링 jupyter note로 테스트  `완료`
2. 크롤링 후 매일 나에게 삭제된 영화, 새로추가된 영화, 현제총 영화,`완료`
    상영가능영화(오늘날자 뒤로),  오류뜬 페이지,  메일로 보내주기.
3.  크롤링 프로젝트에 적용. 1일 1크롤링 하도록.`완료`


4. social login 구현(페이스북, 카카오, 네이버, 구글)`완료`
5. 이메일 인증`완료`
6. sms 인증`완료`
7. Celery& Redis를 사용한 TaskQueue 시스템 구현 Redis 서버로 ElasticCache 사용`완료`
8. django-rest-auth와 django-allauth를 이용한 통합 OAUTH인증`완료`


9. 일반 뷰 main페이지 만들기  `완료`
10. 일반뷰 movie detail페이지 만들기 `완료`
11. 일반뷰 찜 목록 만들기   `여기부터 하면된다.`


12. api-view main페이지 만들기
13. api-view movie detail페이지 만들기
14. api-view 찜목록 만들기.


15.  프론트 프로젝트 시작
16. 프론트  main,movie- detail,찜록록, 페이지 적용하기
17. 프론트 일반 회원가입 창 만들기
18. 프론트 로긴 창 만들기
19. 회원정보 및 수정 (비번,email, 전화번호)  api-view프론트에 적용
20. api-view 구글 로긴 +    프론트 구글 로긴 만들기


21. 회원 탈퇴 일반뷰,  api-view -> 프론트 적용


22.  한시간에 한번 모든 찜 목록 체크해서
    그중 관람 시간 6시간 전인것 뽑아서
    해당 유저에게 메시지를 일괄적으로 다 보내버리기.

23. 프론트 배포
24. 프론트, 백엔드 multi deploy

25. 어플 만들기 -> 2주 소요 예상. 빠르게 출시 하고 반응 보자


26. cI를 사용한 커밋단위 테스트 배포, 머지 자동화
27. awscli, ebcli를 사용 ElasticBeanstalk CNAME Swap기능을 활용한
    1일 1배포 무중단 배포 스크립트 구현
28. 검색 구현
29. 고급 검색기능 구현(ElasticSearch)
30.  Django Channels사용한 채팅서버 구현   



# 일반뷰 찜 목록 만들기

[인스타그렘 좋아요](https://github.com/maro99/Instagram/blob/homwork/app/posts/models.py ) 예전에 했던거 보고 만드는중   


1. 찜한 영화 상영일 빠른것 부터 보이기 `완료`
    영화명/ 일시 / 장소 

2. 취소 버튼 각각 목록 뒤에 달아서 movielike자체 삭제 해버리기 요청 보내기        `완료`        

3. 뷰 호출한 곳으로 다시돌아가기       `완료`                                             
    (찜의 경우 다양한 템플릿에서 post요청 받기 때문에 )  
    `<input type="hidden" name="next" value="{{ request.path }}">`

4. 왜 크롤링 중복된거 또하는지? 1월 5, 6일차에.           `완료`
    -> 엘라스틱 캐시 안의 래디스 리프레시 해줘야 하는듯? 
    ->로컬에서도 같은 증상인것으로 봐서 확인해보니 이거 셀입장후    
    딕셔너리 등등 임포트 한 후에 셀을 빠져나가지 못한다. 
    -> dict_log를 전역변수 잡고 각 함수에서 global로 받아서 main_crawling   
    호출시에만 초기화 해줬다. 


## api-view main페이지 만들기 

1. 날짜순, 장르별, 평점순        `완료`                                                
    장르의 경우 
    장르로 영화를 묶어서 보여주고 싶은데 이거 직렬화 시 
    장르 자체가 하나의 모델이 아니라 영화의 속성이라서  
    장르로 상위의 영화를 묶어서 보여주긴 힘들것 같다. 
    -> 일단은 이것을 장르순으로 정렬해서 영화를 보여주고  자바스크립트의 하나의 변수에 각  
    장를를 할당해 가면서  새로운거 나올때만 h1으로 나타내서 구분하겠다.   
    ( 정규화로 해결하는 방법이 있다고 들은것 같은데. 추후 정규화 기사 공부하고 해보자. )  

2. 페이지 네이션 ! `보류`

##  api-view movie detail페이지 만들기              
금방했다. `완료`



## api-view 찜목록 만들기. 
Auth-test  api-view 보고 했음.  `완료`                                                    




